{"ast":null,"code":"// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { collection, addDoc, getDocs, where, query } from \"firebase/firestore\";\nimport { ref, onUnmounted } from 'vue'; // Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyB5H63Brfoe6WKs8t2v-5WXVP70c8X8hm4\",\n  authDomain: \"marselotech-web.firebaseapp.com\",\n  databaseURL: \"https://marselotech-web-default-rtdb.firebaseio.com\",\n  projectId: \"marselotech-web\",\n  storageBucket: \"marselotech-web.appspot.com\",\n  messagingSenderId: \"186580154211\",\n  appId: \"1:186580154211:web:429698f29b355d1587c556\",\n  measurementId: \"G-RTJMHKPJ0T\"\n}; // Initialize Firebase\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nexport const createUser = async user => {\n  try {\n    const docRef = await addDoc(collection(db, \"users\"), user);\n    console.log(\"Document written with ID: \", docRef.id);\n  } catch (e) {\n    console.error(\"Error adding document: \", e);\n  }\n};\nexport const getLastImage = async imgType => {\n  console.log(imgType.id, imgType.type);\n  const q = query(collection(db, \"images\"), where(\"robotid\", \"==\", imgType.id), where(\"type\", \"==\", imgType.type));\n  const querySnapshot = await getDocs(q);\n  console.log(querySnapshot.docs[querySnapshot.docs.length - 1].data().img);\n  return querySnapshot.docs[querySnapshot.docs.length - 1].data().img;\n};\nexport const useLoadUsers = () => {\n  const users = ref([]);\n  usersCollection.onSnapshot(snapshot => {\n    users.value = snapshot.docs.map(doc => ({\n      id: doc.id,\n      ...doc.data()\n    }));\n  });\n  onUnmounted(close);\n  return users;\n};\nexport const autenticatUser = async user => {\n  const q1 = query(collection(db, \"users\"), where(\"email\", \"==\", user.email));\n  const q2 = query(collection(db, \"users\"), where(\"robotid\", \"==\", user.robotid), where(\"email\", \"==\", user.email));\n  const querySnapshot1 = await getDocs(q1);\n  const querySnapshot2 = await getDocs(q2);\n\n  if (querySnapshot1.docs.length == 0) {\n    return {\n      status: 2,\n      message: \"No existe un usuario con ese email.\"\n    };\n  } else {\n    if (querySnapshot2.docs.length == 0) {\n      return {\n        status: 1,\n        message: \"Datos incorrectos\"\n      };\n    } else {\n      return {\n        status: 0,\n        data: querySnapshot2.docs[0].data()\n      };\n    }\n  }\n};","map":{"version":3,"names":["initializeApp","getAnalytics","getFirestore","collection","addDoc","getDocs","where","query","ref","onUnmounted","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","app","db","createUser","user","docRef","console","log","id","e","error","getLastImage","imgType","type","q","querySnapshot","docs","length","data","img","useLoadUsers","users","usersCollection","onSnapshot","snapshot","value","map","doc","close","autenticatUser","q1","email","q2","robotid","querySnapshot1","querySnapshot2","status","message"],"sources":["/opt/lampp/htdocs/marselotech-web/marselotech-web/src/firebase.js"],"sourcesContent":["// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport { getAnalytics } from \"firebase/analytics\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { collection, addDoc, getDocs, where, query} from \"firebase/firestore\";\nimport {ref, onUnmounted} from 'vue';\n\n// Your web app's Firebase configuration\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: \"AIzaSyB5H63Brfoe6WKs8t2v-5WXVP70c8X8hm4\",\n    authDomain: \"marselotech-web.firebaseapp.com\",\n    databaseURL: \"https://marselotech-web-default-rtdb.firebaseio.com\",\n    projectId: \"marselotech-web\",\n    storageBucket: \"marselotech-web.appspot.com\",\n    messagingSenderId: \"186580154211\",\n    appId: \"1:186580154211:web:429698f29b355d1587c556\",\n    measurementId: \"G-RTJMHKPJ0T\"\n  };\n\n  \n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\n\nexport const createUser = async user => {\n\n    try {\n        const docRef = await addDoc(collection(db, \"users\"), user);\n        console.log(\"Document written with ID: \", docRef.id);\n      } catch (e) {\n        console.error(\"Error adding document: \", e);\n      }\n\n}\n\nexport const getLastImage = async imgType => {\n\n    console.log(imgType.id,imgType.type);\n\n    const q = query(collection(db, \"images\"), where(\"robotid\",\"==\",imgType.id), where(\"type\", \"==\", imgType.type));\n\n    const querySnapshot = await getDocs(q);\n    console.log(querySnapshot.docs[querySnapshot.docs.length-1].data().img);\n\n    return querySnapshot.docs[querySnapshot.docs.length-1].data().img;\n\n}\n\nexport const useLoadUsers = () => {\n    const users = ref([])\n    usersCollection.onSnapshot (snapshot => {\n        users.value = snapshot.docs.map(doc => ({id: doc.id, ...doc.data()}))\n    })\n    onUnmounted(close);\n    return users;\n}\n\n\n\nexport const autenticatUser = async user => { \n\n    const q1 = query(collection(db, \"users\"), where(\"email\", \"==\", user.email));\n    const q2 = query(collection(db,\"users\"), where(\"robotid\", \"==\", user.robotid), where(\"email\", \"==\", user.email));\n    const querySnapshot1 = await getDocs(q1);\n    const querySnapshot2 = await getDocs(q2);\n\n    if(querySnapshot1.docs.length == 0){\n        return {status: 2, message: \"No existe un usuario con ese email.\"}\n    }else{\n        if(querySnapshot2.docs.length == 0){\n            return {status: 1, message: \"Datos incorrectos\"}\n        }else{\n            return {status: 0, data: querySnapshot2.docs[0].data()};           \n        }  \n    }\n}\n\n\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}