{"ast":null,"code":"import { reactive, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  name: 'DashboardMarselotech',\n\n  data() {\n    return {\n      data: {\n        // ros connection\n        ros: null,\n        rosbridge_address: 'ws://127.0.0.1:9090/',\n        connected: false,\n        // service information\n        service_busy: false,\n        service_response: ''\n      }\n    };\n  },\n\n  setup() {\n    onMounted(() => {\n      setTimeout(() => {\n        const jspath = 'http://localhost:8080/js/';\n        var jslibs = 'robot.js';\n        var customLib = document.createElement(\"script\");\n        customLib.setAttribute('src', jspath + jslibs);\n        document.body.appendChild(customLib);\n        console.log(\"entro en la pagina\");\n        document.getElementById(\"btn_conectar\").addEventListener(\"click\", connect);\n        document.getElementById(\"btn_desconectar\").addEventListener(\"click\", disconnect);\n        document.getElementById(\"btn_adelante\").addEventListener(\"click\", move);\n        document.getElementById(\"btn_parar\").addEventListener(\"click\", stop);\n        document.getElementById(\"btn_derecha\").addEventListener(\"click\", move_derecha);\n        document.getElementById(\"btn_izquierda\").addEventListener(\"click\", move_izquierda);\n        document.getElementById(\"btn_atras\").addEventListener(\"click\", move_detras);\n        document.getElementById(\"btn_izquierda\").addEventListener(\"click\", () => {\n          call_delante_service(\"izquierda\");\n        });\n        document.getElementById(\"btn_adelante\").addEventListener(\"click\", () => {\n          call_delante_service(\"delante\");\n        });\n        document.getElementById(\"btn_derecha\").addEventListener(\"click\", () => {\n          call_delante_service(\"derecha\");\n        });\n        document.getElementById(\"btn_atras\").addEventListener(\"click\", () => {\n          call_delante_service(\"atras\");\n        });\n        document.getElementById(\"btn_parar\").addEventListener(\"click\", () => {\n          call_delante_service(\"parar\");\n        }); //w\n\n        document.addEventListener(\"keydown\", w => {\n          call_delante_service(\"delante\");\n        });\n        document.addEventListener('input', w => {\n          logMessage(`Key \"${w.data}\" input  [event: input]`);\n          call_delante_service(\"delante\");\n        });\n        document.addEventListener('beforeinput', a => {\n          logMessage(`Key \"${a.data}\" about to be input  [event: beforeinput]`);\n          call_delante_service(\"izquierda\");\n        }); //a\n\n        document.addEventListener(\"keydown\", a => {\n          call_delante_service(\"izquierda\");\n        });\n        document.addEventListener('input', a => {\n          logMessage(`Key \"${a.data}\" input  [event: input]`);\n          call_delante_service(\"izquierda\");\n        });\n        document.addEventListener('beforeinput', a => {\n          logMessage(`Key \"${a.data}\" about to be input  [event: beforeinput]`);\n          call_delante_service(\"izquierda\");\n        }); //s\n\n        document.addEventListener(\"keydown\", s => {\n          call_delante_service(\"atras\");\n        });\n        document.addEventListener('input', s => {\n          logMessage(`Key \"${s.data}\" input  [event: input]`);\n          call_delante_service(\"atras\");\n        });\n        document.addEventListener('beforeinput', s => {\n          logMessage(`Key \"${s.data}\" about to be input  [event: beforeinput]`);\n          call_delante_service(\"atras\");\n        }); //d\n\n        document.addEventListener(\"keydown\", d => {\n          call_delante_service(\"derecha\");\n        });\n        document.addEventListener('input', d => {\n          logMessage(`Key \"${d.data}\" input  [event: input]`);\n          call_delante_service(\"derecha\");\n        });\n        document.addEventListener('beforeinput', d => {\n          logMessage(`Key \"${d.data}\" about to be input  [event: beforeinput]`);\n          call_delante_service(\"derecha\");\n        });\n      }, 1500);\n    });\n    const router = useRouter();\n\n    const changeTabActive = num => {\n      document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n\n      if (num === 1) {\n        //ex-with-icons-tab-1\n        document.getElementById(\"ex-with-icons-tab-1\").classList.add('active');\n        document.getElementById(\"ex-with-icons-tab-2\").classList.remove('active');\n        document.getElementById(\"ex-with-icons-tab-3\").classList.remove('active');\n      } else if (num === 2) {\n        // ex-with-icons-tab-2\n        //ex-with-icons-tab-1\n        document.getElementById(\"ex-with-icons-tab-2\").classList.add('active');\n        document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n        document.getElementById(\"ex-with-icons-tab-3\").classList.remove('active');\n      } else if (num === 3) {\n        // ex-with-icons-tab-3\n        document.getElementById(\"ex-with-icons-tab-3\").classList.add('active');\n        document.getElementById(\"ex-with-icons-tab-2\").classList.remove('active');\n        document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n      }\n    };\n\n    const connect = () => {\n      console.log(\"Clic en connect\");\n      data.ros = new ROSLIB.Ros({\n        url: data.rosbridge_address\n      });\n      let topic = new ROSLIB.Topic({\n        ros: data.ros,\n        name: '/odom',\n        messageType: 'nav_msgs/msg/Odometry'\n      });\n      topic.subscribe(message => {\n        data.position = message.pose.pose.position; //document.getElementById(\"pos_x\").innerHTML = data.position.x.toFixed(2)\n        //document.getElementById(\"pos_y\").innerHTML = data.position.y.toFixed(2)\n      });\n      let topic3 = new ROSLIB.Topic({\n        ros: data.ros,\n        name: '/image',\n        messageType: 'sensor_msgs/msg/Image'\n      });\n      topic3.subscribe(); // Define callbacks\n\n      data.ros.on(\"connection\", () => {\n        data.connected = true;\n        console.log(\"Conexion con ROSBridge correcta\");\n        document.getElementById(\"robot_conectado\").innerHTML = \"Robot conectado\";\n        setCamera();\n      });\n      data.ros.on(\"error\", error => {\n        console.log(\"Se ha producido algun error mientras se intentaba realizar la conexion\");\n        console.log(error);\n      });\n      data.ros.on(\"close\", () => {\n        data.connected = false;\n        console.log(\"Conexion con ROSBridge cerrada\");\n      });\n    };\n\n    const disconnect = () => {\n      data.ros.close();\n      data.connected = false;\n      console.log('Clic en botón de desconexión');\n      document.getElementById(\"robot_conectado\").innerHTML = \"Robot desconctado\"; // quitamos camara\n\n      document.getElementById(\"divCamera\").innerHTML = \"\";\n    };\n\n    const move = () => {\n      let topic = new ROSLIB.Topic({\n        ros: data.ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/msg/Twist'\n      });\n      let message = new ROSLIB.Message({\n        linear: {\n          x: 0.1,\n          y: 0,\n          z: 0\n        },\n        angular: {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      });\n      topic.publish(message);\n    };\n\n    const move_detras = () => {\n      let topic = new ROSLIB.Topic({\n        ros: data.ros,\n        name: '/cmd_vel',\n        messageType: 'geometry_msgs/msg/Twist'\n      });\n      let message = new ROSLIB.Message({\n        linear: {\n          x: -0.1,\n          y: 0,\n          z: 0\n        },\n        angular: {\n          x: 0,\n          y: 0,\n          z: 0\n        }\n      });\n      topic.publish(message);\n    };\n\n    return {\n      changeTabActive,\n      connect,\n      disconnect,\n      move,\n      move_detras\n    };\n  }\n\n};","map":{"version":3,"mappings":"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","names":["reactive","onMounted","useRouter","name","data","ros","rosbridge_address","connected","service_busy","service_response","setup","setTimeout","jspath","jslibs","customLib","document","createElement","setAttribute","body","appendChild","console","log","getElementById","addEventListener","connect","disconnect","move","stop","move_derecha","move_izquierda","move_detras","call_delante_service","w","logMessage","a","s","d","router","changeTabActive","num","classList","remove","add","ROSLIB","Ros","url","topic","Topic","messageType","subscribe","message","position","pose","topic3","on","innerHTML","setCamera","error","close","Message","linear","x","y","z","angular","publish"],"sourceRoot":"","sources":["/opt/lampp/htdocs/marselotech-web/marselotech-web/src/views/DashboardMarselotech.vue"],"sourcesContent":["<template>\n    <div class=\"grey\">\n        <!--Main Navigation-->\n        <header>\n\n            <!-- Sidebar -->\n            <div class=\"sidebar-fixed position-fixed sidebar\">\n\n                <router-link to=\"/\">\n                    <a  class=\" waves-effect mt-2\">\n                        <img src=\"http://localhost:8080/images/mtech-logo.png\" class=\"img-fluid\" alt=\"\">\n                    </a>\n                </router-link>\n                \n\n                <div class=\"list-group list-group-flush mt-2 \">\n                    \n                    <a href=\"#\" class=\"list-group-item active waves-effect sidebar txt1\">\n                        <i class=\"fas fa-chart-pie mr-3\"></i>Dashboard\n                    </a>\n                    <a href=\"#\" class=\"list-group-item list-group-item-action waves-effect sidebar txt1\">\n                        <i class=\"fas fa-user mr-3\"></i>Profile</a>\n                    <router-link to=\"/\">\n                        <a  class=\"list-group-item list-group-item-action waves-effect sidebar txt1\" >\n                        <i class=\"fas fa-backward mr-3\"></i>Volver</a>\n                    </router-link>\n                    \n                </div>\n\n            </div>\n            <!-- Sidebar -->\n\n        </header>\n        <!--Main Navigation-->\n\n        <!--Main layout-->\n        <main class=\"pt-1 mx-lg-5 \">\n            <div class=\"container-fluid mt-5\">\n                <!-- Heading -->\n                <div class=\"card mb-4 wow fadeIn\">\n\n                    <!--Card content-->\n                    <div class=\"card-body d-sm-flex justify-content-between\">\n\n                        <h4 class=\"mb-2 mb-sm-0 pt-1\">\n                            <router-link to=\"/\">\n                                <a>Marselotech</a>\n                            </router-link>\n                            <span class=\"txt1\">/</span>\n                            <span class=\"txt1\">Panel de control</span>\n                        </h4>\n                    </div>\n\n                </div>\n                <!-- Heading -->\n\n                <!--Grid row-->\n                <div class=\"row wow fadeIn\">\n\n                    <!--Grid column-->\n                    <div class=\"col-md-4 mb-4\">\n\n                        <!--Card-->\n                        <div class=\"card mb-4 dark_cards\">\n\n                            <!-- Card header -->\n                            <div id=\"robot_conectado\" class=\" text-danger card-header text-center d-flex justify-content-center\">\n                                Estado robot: desconectado\n                            </div>\n\n                            <div class=\"card-body text-center\">\n\n                                <div class=\"pl-5 pr-5 pb-2\">\n                                    <img src=\"http://localhost:8080/images/turtlebot3-burger.png\" class=\"img-fluid\" />\n                                </div>\n\n                                <div class=\"col-12\">\n                                    <button id=\"btn_conectar\" type=\"button\" class=\"btn btn-success btn-sm\">Conectar</button>\n                                    <button id=\"btn_desconectar\" type=\"button\" class=\"btn btn-danger btn-sm\">Desconectar</button>\n                                </div>\n\n                                <div class=\"col-12\">\n                                <button id=\"btn_adelante\" type=\"button\" class=\"btn btn-primary btn-sm \"><i class=\"fas fa-arrow-up fa-lg \" style=\"margin-left: 0;margin-right: 0;\"></i></button>\n                                <br>\n                                <div class=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                                    <button id=\"btn_izquierda\" type=\"button\" class=\"btn btn-primary btn-sm text-center\"> <i class=\"fas fa-arrow-left fa-lg\" style=\"margin-left: 0;margin-right: 0;\"></i></button>\n                                    <button id=\"btn_parar\" type=\"button\" class=\"btn btn-warning btn-sm text-center\"> <i class=\"fas fa-stop fa-lg\" style=\"margin-left: 0;margin-right: 0;\"></i></button>\n                                    <button id=\"btn_derecha\" type=\"button\" class=\"btn btn-primary btn-sm text-center\"> <i class=\"fas fa-arrow-right fa-lg\" style=\"margin-left: 0;margin-right: 0;\"></i></button>\n                                </div>\n                                <br>\n                                <button id=\"btn_atras\" type=\"button\" class=\"btn btn-primary btn-sm\"><i class=\"fas fa-arrow-down fa-lg\" style=\"margin-left: 0;margin-right: 0;\"></i></button>\n                                </div>\n                            </div>\n\n                        </div>\n                        <!--/.Card-->\n\n                    </div>\n                    <!--Grid column-->\n\n                    <!--Grid column-->\n                    <div class=\"col-md-8 mb-4\">\n\n                        <!--Card-->\n                        <div class=\"card\">\n\n                            <!-- Card header -->\n                            <div class=\"card-header txt1\">\n                                <!-- Tabs navs -->\n                                <ul class=\"nav nav-tabs mb-3\" id=\"ex-with-icons\" role=\"tablist\">\n                                    <li class=\"nav-item\" role=\"presentation\">\n                                        <a v-on:click=\"changeTabActive('1')\"  class=\"nav-link active\" id=\"ex-with-icons-tab-1\" data-toggle=\"tab\" data-mdb-toggle=\"tab\" href=\"#a\" role=\"tab\"\n                                        aria-controls=\"ex-with-icons-tabs-1\" aria-selected=\"true\"><i class=\"fas fa-low-vision mr-2\"></i>Vigilancia</a>\n                                    </li>\n                                    <li v-on:click=\"changeTabActive('2')\"  class=\"nav-item\" role=\"presentation\">\n                                        <a class=\"nav-link\" id=\"ex-with-icons-tab-2\" data-toggle=\"tab\" data-mdb-toggle=\"tab\" href=\"#b\" role=\"tab\"\n                                        aria-controls=\"ex-with-icons-tabs-2\" aria-selected=\"false\"><i class=\"fas fa-map-marker-alt mr-2\"></i>Exploración</a>\n                                    </li>\n                                    <li v-on:click=\"changeTabActive('3')\"  class=\"nav-item\" role=\"presentation\">\n                                        <a class=\"nav-link\" id=\"ex-with-icons-tab-3\" data-toggle=\"tab\" data-mdb-toggle=\"tab\" href=\"#c\" role=\"tab\"\n                                        aria-controls=\"ex-with-icons-tabs-3\" aria-selected=\"false\"><i class=\"fas fa-luggage-cart mr-2\"></i>Soporte</a>\n                                    </li>\n                                </ul>\n                                <!-- Tabs navs -->\n                            </div>\n\n                            <!--Card content-->\n                            <div class=\"card-body\">\n                                <div class=\"tab-content\">\n                                    <div class=\"tab-pane active\" id=\"a\">\n\n                                        <div>\n                                            <button  type=\"button\" class=\"btn btn-primary btn-sm\">Sacar foto</button>\n                                            <button  type=\"button\" class=\"btn btn-primary btn-sm\">Detectar persona</button>\n                                            <button type=\"button\" class=\"btn btn-primary btn-sm\">Detectar enemigo</button>\n                                        </div>\n\n                                        <div class=\"text-center\">\n                                            <a class=\"ripple img-fluid\">\n                                                <img\n                                                        alt=\"example\"\n                                                        class=\"img-fluid rounded\"\n                                                        src=\"https://mdbcdn.b-cdn.net/img/new/standard/city/044.webp\"\n                                                />\n                                            </a>\n                                        </div>\n\n                                    </div>\n                                    <div class=\"tab-pane\" id=\"b\">\n                                        <!--Google map-->\n                                        <div id=\"map-container-google-2\" class=\"z-depth-1-half map-container\" >\n                                            <iframe src=\"https://maps.google.com/maps?q=chicago&t=&z=13&ie=UTF8&iwloc=&output=embed\" frameborder=\"0\"\n                                                    style=\"border:0\" allowfullscreen></iframe>\n                                        </div>\n\n                                        <!--Google Maps-->\n                                    </div>\n                                    <div class=\"tab-pane\" id=\"c\">\n                                        <button  type=\"button\" class=\"btn btn-primary btn-sm\">Sacar foto</button>\n                                        <button  type=\"button\" class=\"btn btn-primary btn-sm\">Detectar armas</button>\n\n                                        <div class=\"text-center\">\n                                            <a class=\"ripple img-fluid\">\n                                                <img\n                                                        alt=\"example\"\n                                                        class=\"img-fluid rounded\"\n                                                        src=\"https://mdbcdn.b-cdn.net/img/new/standard/city/044.webp\"\n                                                />\n                                            </a>\n                                        </div>\n\n                                    </div>\n                                </div>\n\n                            </div>\n\n                        </div>\n                        <!--/.Card-->\n\n                    </div>\n                    <!--Grid column-->\n\n\n\n                </div>\n                <!--Grid row-->\n\n            </div>\n        </main>\n        <!--Main layout-->\n    </div>\n</template>\n\n<script>\nimport { reactive, onMounted} from 'vue';\nimport { useRouter } from 'vue-router';\n\nexport default{\n    name: 'DashboardMarselotech',\n    data(){\n        return {\n            data: {\n                 // ros connection\n                ros: null,\n                rosbridge_address: 'ws://127.0.0.1:9090/',\n                connected: false,\n                // service information\n                service_busy: false,\n                service_response: ''\n            }\n        }\n    },\n    setup(){\n\n        onMounted(()=>{\n            setTimeout(() => {\n                const jspath = 'http://localhost:8080/js/';\n                var jslibs = 'robot.js';\n                var customLib = document.createElement(\"script\");\n                customLib.setAttribute('src',jspath+jslibs);\n                document.body.appendChild(customLib);\n\n\n                console.log(\"entro en la pagina\")\n\n                document.getElementById(\"btn_conectar\").addEventListener(\"click\", connect)\n                document.getElementById(\"btn_desconectar\").addEventListener(\"click\", disconnect)\n                document.getElementById(\"btn_adelante\").addEventListener(\"click\", move)\n                document.getElementById(\"btn_parar\").addEventListener(\"click\", stop)\n                document.getElementById(\"btn_derecha\").addEventListener(\"click\", move_derecha)\n                document.getElementById(\"btn_izquierda\").addEventListener(\"click\", move_izquierda)\n                document.getElementById(\"btn_atras\").addEventListener(\"click\", move_detras)\n\n                document.getElementById(\"btn_izquierda\").addEventListener(\"click\", () => {\n                    call_delante_service(\"izquierda\")\n                })\n                document.getElementById(\"btn_adelante\").addEventListener(\"click\", () => {\n                    call_delante_service(\"delante\")\n                })\n                document.getElementById(\"btn_derecha\").addEventListener(\"click\", () => {\n                    call_delante_service(\"derecha\")\n                })\n                document.getElementById(\"btn_atras\").addEventListener(\"click\", () => {\n                    call_delante_service(\"atras\")\n                })\n                document.getElementById(\"btn_parar\").addEventListener(\"click\", () => {\n                    call_delante_service(\"parar\")\n                })\n\n                //w\n                document.addEventListener(\"keydown\", (w) => {\n                    call_delante_service(\"delante\")\n                })\n\n                document.addEventListener('input', (w) => {\n                    logMessage(`Key \"${w.data}\" input  [event: input]`);\n                    call_delante_service(\"delante\")\n                });\n\n                document.addEventListener('beforeinput', (a) => {\n                    logMessage(`Key \"${a.data}\" about to be input  [event: beforeinput]`);\n                    call_delante_service(\"izquierda\")\n                });\n\n                //a\n                document.addEventListener(\"keydown\", (a) => {\n                    call_delante_service(\"izquierda\")\n                })\n\n                document.addEventListener('input', (a) => {\n                    logMessage(`Key \"${a.data}\" input  [event: input]`);\n                    call_delante_service(\"izquierda\")\n                });\n\n                document.addEventListener('beforeinput', (a) => {\n                    logMessage(`Key \"${a.data}\" about to be input  [event: beforeinput]`);\n                    call_delante_service(\"izquierda\")\n                });\n\n                //s\n                document.addEventListener(\"keydown\", (s) => {\n                    call_delante_service(\"atras\")\n                })\n\n                document.addEventListener('input', (s) => {\n                    logMessage(`Key \"${s.data}\" input  [event: input]`);\n                    call_delante_service(\"atras\")\n                });\n\n                document.addEventListener('beforeinput', (s) => {\n                    logMessage(`Key \"${s.data}\" about to be input  [event: beforeinput]`);\n                    call_delante_service(\"atras\")\n                });\n\n                //d\n                document.addEventListener(\"keydown\", (d) => {\n                    call_delante_service(\"derecha\")\n                })\n\n                document.addEventListener('input', (d) => {\n                    logMessage(`Key \"${d.data}\" input  [event: input]`);\n                    call_delante_service(\"derecha\")\n                });\n\n                document.addEventListener('beforeinput', (d) => {\n                    logMessage(`Key \"${d.data}\" about to be input  [event: beforeinput]`);\n                    call_delante_service(\"derecha\")\n                });\n\n            },1500);\n        });\n        \n        const router = useRouter();\n        const changeTabActive = (num) =>{\n            document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n            if(num === 1){\n                //ex-with-icons-tab-1\n                document.getElementById(\"ex-with-icons-tab-1\").classList.add('active');\n                document.getElementById(\"ex-with-icons-tab-2\").classList.remove('active');\n                document.getElementById(\"ex-with-icons-tab-3\").classList.remove('active');\n            }else if(num === 2){\n                // ex-with-icons-tab-2\n                //ex-with-icons-tab-1\n                document.getElementById(\"ex-with-icons-tab-2\").classList.add('active');\n                document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n                document.getElementById(\"ex-with-icons-tab-3\").classList.remove('active');\n            }else if(num === 3){\n                // ex-with-icons-tab-3\n                document.getElementById(\"ex-with-icons-tab-3\").classList.add('active');\n                document.getElementById(\"ex-with-icons-tab-2\").classList.remove('active');\n                document.getElementById(\"ex-with-icons-tab-1\").classList.remove('active');\n            }\n        }\n\n        const  connect = () => {\n            console.log(\"Clic en connect\")\n\n            data.ros = new ROSLIB.Ros({\n                url: data.rosbridge_address\n\n            })\n\n            let topic = new ROSLIB.Topic({\n                ros: data.ros,\n                name: '/odom',\n                messageType: 'nav_msgs/msg/Odometry'\n            })\n            topic.subscribe((message) => {\n                data.position = message.pose.pose.position\n                //document.getElementById(\"pos_x\").innerHTML = data.position.x.toFixed(2)\n                //document.getElementById(\"pos_y\").innerHTML = data.position.y.toFixed(2)\n            })\n            let topic3 = new ROSLIB.Topic({\n                ros: data.ros,\n                name: '/image',\n                messageType: 'sensor_msgs/msg/Image'\n            })\n            topic3.subscribe();\n\n            // Define callbacks\n            data.ros.on(\"connection\", () => {\n                data.connected = true\n                console.log(\"Conexion con ROSBridge correcta\")\n                document.getElementById(\"robot_conectado\").innerHTML=\"Robot conectado\"\n                setCamera();\n            })\n            data.ros.on(\"error\", (error) => {\n                console.log(\"Se ha producido algun error mientras se intentaba realizar la conexion\")\n                console.log(error)\n            })\n            data.ros.on(\"close\", () => {\n                data.connected = false\n                console.log(\"Conexion con ROSBridge cerrada\")\n            })\n        }\n\n        const disconnect= () => {\n            data.ros.close()\n            data.connected = false\n            console.log('Clic en botón de desconexión')\n            document.getElementById(\"robot_conectado\").innerHTML=\"Robot desconctado\"\n\n            // quitamos camara\n            document.getElementById(\"divCamera\").innerHTML = \"\"\n        }\n\n        const move = () => {\n        \n                let topic = new ROSLIB.Topic({\n                    ros: data.ros,\n                    name: '/cmd_vel',\n                    messageType: 'geometry_msgs/msg/Twist'\n                })\n\n                let message = new ROSLIB.Message({\n                    linear: {x: 0.1, y: 0, z: 0, },\n                    angular: {x: 0, y: 0, z: 0},\n                })\n\n                topic.publish(message)\n\n        }\n\n        const move_detras = () => {\n        \n                let topic = new ROSLIB.Topic({\n                    ros: data.ros,\n                    name: '/cmd_vel',\n                    messageType: 'geometry_msgs/msg/Twist'\n                })\n\n                let message = new ROSLIB.Message({\n                    linear: {x: -0.1, y: 0, z: 0, },\n                    angular: {x: 0, y: 0, z: 0},\n                })\n\n                topic.publish(message)\n        }\n\n\n        return { changeTabActive, connect, disconnect, move, move_detras};\n    }\n};\n\n</script>\n\n    <style>\n\n        .map-container{\n            overflow:hidden;\n            padding-bottom:56.25%;\n            position:relative;\n            height:0;\n        }\n        .map-container iframe{\n            left:0;\n            top:0;\n            height:100%;\n            width:100%;\n            position:absolute;\n        }\n\n        :root{\n            /* dark color */\n            --dark-h: 0;\n            --dark-s: 0%;\n            --dark-l: 12%;\n            --dark-color: var(--dark-h), var(--dark-s), var(--dark-l);\n            /* light color */\n            --light-h: 0;\n            --light-s: 0%;\n            --light-l: 100%;\n            --light-color: var(--light-h), var(--light-s), var(--light-l);\n\n            --bg-color-one: var(--dark-color);\n            --bg-color-two: var(--dark-h), var(--dark-s), calc(var(--dark-l) + 7%);\n            --t-color-one: var(--light-color);\n\n        }\n\n        .card {\n            background-color: hsl(var(--bg-color-two)) !important;\n        }\n\n        .sidebar{\n            background-color: hsl(var(--bg-color-two)) !important;\n        }\n\n        .grey{\n            background-color: hsl(var(--bg-color-one)) !important;\n        }\n\n        .txt1{\n            color: hsl(var(--t-color-one)) !important;\n        }\n    </style>"]},"metadata":{},"sourceType":"module"}